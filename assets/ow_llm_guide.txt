ONLYWORLDS SDK - QUICK START GUIDE FOR DEVELOPERS & LLMs
=========================================================

FOR LLM ASSISTANTS: SUPPORTING USER ENVIRONMENT SETUP
------------------------------------------------------

Before diving into OnlyWorlds development, users may need help setting up their development environment. Be prepared to assist with:

1. **Node.js Installation**
   - Check if installed: Ask user to run `node --version` in terminal
   - If not installed or version < 18:
     - Direct to nodejs.org/en/download
     - Recommend LTS version (20+)
     - Help verify installation: `node --version` and `npm --version`

2. **Git Installation** (optional but recommended)
   - Check: `git --version`
   - If not installed: git-scm.com/downloads
   - Help with basic config if needed:
     - `git config --global user.name "User Name"`
     - `git config --global user.email "email@example.com"`

3. **Code Editor/IDE Setup**
   - Recommend VS Code (code.visualstudio.com) for beginners
   - Suggest extensions: "TypeScript", "Vite"
   - Help them open terminal in VS Code (Ctrl+` or View > Terminal)

4. **Terminal/Command Line Access**
   - Windows: PowerShell, Command Prompt, or Git Bash
   - Mac/Linux: Terminal
   - Help them navigate to project directory with `cd` commands

5. **Creating Project Directory**
   - Help them create a folder for their project
   - Navigate to it in terminal: `cd path/to/project`

Once environment is ready, proceed with the OnlyWorlds-specific setup below.

=========================================================

ONLYWORLDS SDK QUICK START
===========================

Get from zero to working OnlyWorlds tool in 5 minutes.

PREREQUISITES
-------------
- Node.js 18+ installed (run `node --version` to check)
- OnlyWorlds account at onlyworlds.com

GET API CREDENTIALS
-------------------
1. Sign up at onlyworlds.com
2. Go to Profile ï¿½ API Credentials
3. Copy your API Key and PIN

IMPORTANT: API keys are world-scoped. One key = one world. You never need to specify a world ID.

MINIMAL WORKING EXAMPLE
-----------------------
Create a file test.ts and run it to verify connectivity:

```typescript
import { OnlyWorldsClient } from '@onlyworlds/sdk';

const client = new OnlyWorldsClient({
  apiKey: 'your-api-key',
  apiPin: '1234'
});

// Get your world (API key determines which world)
const world = await client.worlds.get();
console.log('Connected to:', world.name);

// List characters (returns paginated results)
const chars = await client.characters.list();
console.log('Found', chars.count, 'characters');
console.log('First page:', chars.results.length, 'items');
```

Run it: npx tsx test.ts

CRITICAL DIFFERENCE: worlds.get() returns a single World object. All other endpoints return paginated results with { count, results, next, previous }.

FULL PROJECT SETUP
------------------

Install Dependencies:
npm init -y
npm install @onlyworlds/sdk
npm install --save-dev typescript vite @types/node

Configure package.json:
{
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build"
  }
}

Configure tsconfig.json:
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM"],
    "moduleResolution": "node",
    "strict": true,
    "esModuleInterop": true
  }
}

Configure vite.config.ts:
import { defineConfig } from 'vite';

export default defineConfig({
  server: { port: 3000 }
});

Create index.html:
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>OnlyWorlds Tool</title>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>

Create src/main.ts:
import { OnlyWorldsClient } from '@onlyworlds/sdk';

const client = new OnlyWorldsClient({
  apiKey: 'your-api-key',
  apiPin: '1234'
});

async function init() {
  const world = await client.worlds.get();
  document.getElementById('app')!.innerHTML = `
    <h1>${world.name}</h1>
    <p>${world.description || 'No description'}</p>
  `;
}

init();

Run Development Server: npm run dev
Open http://localhost:3000 - you should see your world name.

BASIC OPERATIONS
----------------

List Elements:

// List all characters
const response = await client.characters.list();
console.log(response.results);  // Array of Character objects

// List with filters
const humans = await client.characters.list({
  supertype: 'Human',           // Filter by supertype
  name__icontains: 'aragorn',   // Search by name
  limit: 50,                    // Page size (default: 100)
  ordering: '-created_at'       // Sort (- for descending)
});

// Pagination
if (response.next) {
  const nextPage = await client.characters.list({
    offset: response.results.length
  });
}

Get Single Element:

const character = await client.characters.get('element-uuid');
console.log(character.name);
console.log(character.description);

Create Element:

const newChar = await client.characters.create({
  name: 'Aragorn',                    // Required
  description: 'Heir of Isildur',    // Optional
  supertype: 'Human',                 // Optional
  subtype: 'Ranger',                  // Optional
  image_url: 'https://example.com/aragorn.jpg'
});

console.log('Created:', newChar.id);

Update Element:

// Partial update - only send changed fields
const updated = await client.characters.update('element-uuid', {
  description: 'Updated description'
});

Delete Element:

await client.characters.delete('element-uuid');

LINKING ELEMENTS
---------------------------

OnlyWorlds elements can link to other elements. The SDK handles the format conversion automatically.

Single-link fields (birthplace, location, etc.):
await client.characters.create({
  name: 'Frodo',
  birthplace: 'shire-location-id',  // String UUID
  location: 'rivendell-location-id'
});

Multi-link fields (species, abilities, traits, etc.):
await client.characters.create({
  name: 'Aragorn',
  species: ['human-species-id'],                  // Array of UUIDs
  abilities: ['sword-id', 'tracking-id'],
  traits: ['brave-id', 'noble-id'],
  friends: ['legolas-id', 'gimli-id']
});

Complete example:
const character = await client.characters.create({
  name: 'Gandalf',
  description: 'Grey wizard',
  supertype: 'Maia',

  // Single links - use clean field name
  birthplace: 'valinor-location-id',
  location: 'middle-earth-location-id',

  // Multi links - use clean field name with array
  species: ['maia-species-id'],
  abilities: ['magic-id', 'staff-combat-id'],
  languages: ['common-id', 'elvish-id']
});

Reading link Relationships:

The API returns FULL NESTED OBJECTS, not just IDs:

const char = await client.characters.get('character-id');

// Single links return full objects
console.log(char.birthplace.name);     // 'The Shire'
console.log(char.location.description); // Full location data

// Multi links return arrays of full objects
char.species.forEach(sp => {
  console.log(sp.name);  // Full Species object
});

Filtering by link-relations:

Use _id or _ids suffix when filtering:

// Find all characters born in the Shire
const hobbits = await client.characters.list({
  birthplace_id: 'shire-location-id'  // Note: _id suffix
});

// Find characters with specific species
const elves = await client.characters.list({
  species_ids: 'elf-species-id'  // Note: _ids suffix
});

LINK PATTERN SUMMARY:

Operation    | Field Format        | Example
-------------|---------------------|---------------------------
Create       | Clean name          | birthplace: 'uuid'
Update       | Clean name          | species: ['uuid1', 'uuid2']
Read         | Clean name          | char.birthplace.name
Filter       | With _id/_ids       | birthplace_id: 'uuid'

RELATION ELEMENTS:
Beyond link fields, the 'Relation' category can be used to create particularly deep statements between two elements, especially characters and institutions.

AVAILABLE ELEMENT TYPES
------------------------

All 22 element types support the same CRUD operations:

Beings: characters, creatures, species
Groups: families, collectives, institutions
Places: locations, objects (includes buildings)
Things: constructs (concepts, systems, currencies)
Powers: abilities, traits, titles, languages
Rules: laws
Story: events, narratives, phenomena, relations
Maps: maps, pins, markers, zones
Meta: worlds

Usage (all follow same pattern):
await client.locations.list();
await client.abilities.create({ name: 'Flight' });
await client.events.get('event-uuid');
await client.maps.update('map-uuid', { name: 'New Name' });

DEPLOYMENT
----------

Build for Production:
npm run build

Output: dist/ directory

CORS Pre-Approved Platforms:

OnlyWorlds API accepts requests from:
- Cloudflare Pages: *.pages.dev
- Vercel: *.vercel.app
- Netlify: *.netlify.app
- GitHub Pages: *.github.io
- Local development: localhost:*, 127.0.0.1:*

Deploy to any of these platforms and API requests work immediately (no CORS configuration needed).

Cloudflare Pages (Recommended):
1. Push code to GitHub
2. Connect repo to Cloudflare Pages
3. Build command: npm run build
4. Output directory: dist
5. Node version: 18+

COMMON PITFALLS
---------------

WRONG: Trying to list worlds
const worlds = await client.worlds.list(); // Error: no list() method

CORRECT: Get your world directly
const world = await client.worlds.get(); // Returns single World

---

WRONG: Using _id suffix in create/update
await client.characters.create({
  birthplace_id: 'location-uuid'  // Wrong!
});

CORRECT: Use clean field name
await client.characters.create({
  birthplace: 'location-uuid'  // SDK converts to birthplace_id
});

---

WRONG: Using clean name in filters
await client.characters.list({
  birthplace: 'location-uuid'  // Won't filter correctly
});

CORRECT: Use _id suffix in filters
await client.characters.list({
  birthplace_id: 'location-uuid'  // Filters work
});

---

WRONG: Assuming relationships are just IDs
const char = await client.characters.get('id');
console.log(char.species);  // Not an array of IDs!

CORRECT: API returns full objects
const char = await client.characters.get('id');
console.log(char.species[0].name);  // Array of full Species objects

NEXT STEPS
----------

Full API Reference: onlyworlds.com/api/docs
SDK Package: npmjs.com/package/@onlyworlds/sdk
Schema Repo: github.com/OnlyWorlds/OnlyWorlds
Example Tools: onlyworlds.github.io/docs/tools

Questions or issues? Discord or GitHub for support.

---
Last updated: 2025-12-12
SDK version: 2.2.0+
